<!DOCTYPE html>
<html lang="en">
<head>
  <title>Motion Ticker</title>
  <meta charset="UTF-8">  
  <meta name="description" content="Track moving objects in videos. Educational tool.">
  <meta name="keywords" content="video, analysis, tracking, motion, schools, education, classroom, videometen">
  <meta name="author" content="Jeroen van Tilburg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:image" content="https://jeroenvantilburg.nl/motionticker/img/screenshot.png" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://jeroenvantilburg.nl/motionticker/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon-apple-touch-180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="icon" type="image/vnd.microsoft.icon" sizes="32x32" href="favicon.ico">
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <link rel="stylesheet" type="text/css" href="style.css" media="screen,projection" />
  <link rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <base target="_blank">
</head>  
<body>
  <div class="header">    
    <div class="titlebar"><i class="fa fa-film"></i> Motion Ticker</div>    
    <div class="menubar">    
      <div class="dropdown"> 
        <button class="dropbtn"><i class="fa fa-bars"></i></button>    
        <div class="dropdown-content">  
          <a id="showAbout"><i class="fa fa-vcard"></i> About</a>
          <a id="showSettings"><i class="fa fa-cogs"></i> Settings</a>
          <a id="videoImport" disabled><i class="fa fa-upload"></i> Upload new video</a>
          <input id="videoInput" type="file" accept="video/*,.mkv,.mov" hidden/>
          <a id="csvExport"><i class="fa fa-download"></i> Export csv-file</a>
          <a id="csvImport"><i class="fa fa-upload"></i> Import csv-file</a>
          <input id="csvInput" type="file" accept="text/plain,text/csv,.csv,.tsv" hidden>
          <a id="deleteData"><i class="fa fa-trash-o"></i> Delete data</a>
          <a id="showHelp"><i class="fa fa-question-circle-o"></i> Help</a>
        </div>
      </div>
    </div>
  </div>
  
  <div class="body">
    <div class="showSideBar"><i class="fa fa-chevron-left"></i></div>
    <div class="hideSideBar"><i class="fa fa-chevron-right"></i></div>
    <div class="page">  
	  	<div class="page-header">               
        <div class="center">
          <button id="startAndStopManual" class="main-button button-on" disabled>Start analysis</button>
          <input id="automaticAnalysis" type="checkbox">Automatic</input>
        </div>
        <div class="center">
           <nobr id="statusMsg"></nobr>
        </div>
        <div class="center">
          <button id="prev" class="player" disabled><i class="fa fa-step-backward"></i></button>
          <button id="play" class="player" disabled><i class="fa fa-play"></i></button>
          <button id="next" class="player" disabled><i class="fa fa-step-forward"></i></button>
          <input id="slider" type="range" min="0" max="100" step=1 value="0" disabled>
          <nobr id="frameNumber">0 / 0</nobr>
          <button id="zoomOut" class="player" disabled><i class="fa fa-search-minus"></i></button>
          <button id="zoomIn" class="player" disabled><i class="fa fa-search-plus"></i></button>
        </div>
      </div>
      <div class="page-content">
        <div id="canvasContainer" class="container" style="position:relative">
          <video id="video" autoplay playsinline muted style="display:block;"></video>
          <canvas id="canvasOutput"></canvas>
          <input id="distanceInput" type="text" value="?" style="display:none"></input>
        </div>    
      </div>
		</div>
    
    <div class="sidebar">
      <div class="side-header">
        Data        
      </div>
      <div class="side-content">
        <table style="border-spacing: 0;">
          <tr>
            <td>Frame rate:</td>
            <td><input id="fpsInput" type="text" style="width:60px"></input> fps</td>
            <td><button id="showMediaInfo" disabled>Media info</button></td>
          </tr>
          <tr>
            <td>Scale:</td>
            <td><input id="scaleInput" type="text" style="width:60px"></input> px/m</td>
            <!--td><button id="scale" disabled hidden>Scale wizard</button></td-->
          </tr>
          <tr>
            <td>Origin (x,y): (</td>
            <td><input id="originXInput" type="text" style="width:40px"></input>,
                <input id="originYInput" type="text" style="width:40px"></input>) px</td>
            <!--td><button id="origin" disabled hidden>Origin wizard</button></td-->
          </tr>
        </table>
        <div class="chart-container">
          <canvas id="positionChart" class="chart"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="velocityChart" class="chart"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="accelerationChart" class="chart" style="display: none"></canvas>
        </div>
      </div>
    </div>
  </div>
  
  <!-- The Modal boxes -->
  <div id="aboutModal" class="modal">
    <div class="modal-content modal-small"> <span class="close">&times;</span>
      <center>
        <h3>Motion Ticker</h3>
          <img src="img/favicon-apple-touch-114.png"/><br clear="all"/><br/>
          &copy; 2021 Jeroen van Tilburg, MIT licentie <br/>
          Feedback to <feedback></feedback> <br/> 
          Source code: <a href="https://github.com/jeroenvantilburg/motionticker">Github</a> <br/>
      </center>
    </div>
  </div>

  <div id="helpModal" class="modal">
    <div class="modal-content"> <span class="close">&times;</span>
      <h2>Help</h2>

      <b>General</b><br/>
      Motion Ticker is a HTML5 javascript-application for analysing the motion of objects in videos.
      It is primarily intended for use in the classroom to educate people about motion
      and mechanics. The name is a tribute to the old-fashioned ticker taper timers that were used 
      in the era before computers and smartphones were widespread.        
      <br/><br/>
      
      <b>Getting started</b><br/>
      You can analyse the motion of an object in 5 simple steps:
      <ol>
        <li><b>Upload a new video.</b></li>
        <li><b>Calibrate the scale of the video.</b> 
          You can either set the right value in the input field or use the scale wizard.</li>
        <li><b>Start the analysis.</b> You can choose between manual or automatic analysis:
          <ul>
            <li>Manual analysis: Click on the object in each frame.</li>
            <li>Automatic analysis: First define the track window. Then the 
            program will try to follow its motion by analysing each frame.</li>
          </ul>
        </li>
        <li><b>Export the data to a csv file</b> such that you can analyse the data at any time in
        a spreadsheet application.</li>
      </ol>

      <b>Setting up</b><br/>
      Upload the video that you would like to analyse. The supported video formats are
      MP4, MOV, WebM and Ogg.
      After uploading your video, the frame rate is calculated using the mediainfo tool. In
      the event that this calculation stalls, you can set the frame rate manually. In most cases
      a frame rate of 30 or 60 frames per second (fps) is appropriate. The next step is to calibrate
      the scale of the video in meters per pixel. It is advised to place a scale marker such as a ruler
      in your video. The scale wizard will ask you to mark the end-points and give the size in meters
      between them. Alternatively, you can set or change the scale manually in the input field.
      Optionally, the origin of your coordinate system can be set in the input fields or using the 
      origin wizard.
      <br/><br/>

      <b>Analysis</b><br/>
      In the manual analysis the movement of the object is obtained by clicking in each frame on
      the position on the object. For larger object one can click on a well-defined spot like an edge,
      another distinctive feature. After each click the next frame (default) is shown. The number 
      of frames to skip can be adjusted in the settings.
      When the automatic box is ticked the object the program tries to track the object automatically.
      First the track window, where the object is located, needs to be defined. Then the 
      program will try to follow the motion of this object by analysing each frame. 
      In the settings it is possible to allow for rotations and changes in the size of the object by
      selecting the adaptive tracking algorithm. 
      <br/><br/>

      <b>Derived data: velocity and acceleration</b><br/>
      The three graphs show the position of the object in meters, the velocity and the acceleration.
      The acceleration graphs is turned off by default. This can be changed in the settings. Note that
      changing their display also affects the exported CSV data.
      
      The velocity is calculated from two position data points. Likewise, the acceleration is
      calculated from two velocity data points. The corresponding time is the average
      of these data points. The integration time (settings) is the minimal number of frames between 
      these points. The default integration time is set to 2 frames. Note that the number of frames 
      between these points can be larger when frames are skipped during the analysis. Choosing a
      larger integration time results in a smoother velocity/acceleration graph, but a reduced
      sensitivity to (sudden) changes in the velocity or acceleration.
      <br/><br/>

      <b>CSV files</b><br/>
      After analysis, save your data by exporting it to a CSV file. Then you can continue your
      analysis at a later stage or use your data in a spreadsheet application. In the settings
      you can change the decimal separator and the delimiter in the CSV file to facilitate the 
      import in your spreadsheet application. Note that the velocity and accelerationfields have 
      their own time stamps, which may not overlap with the time stamps from the positions. 
      This may cause empty cells in the CSV file. This can be avoided to some extent by checking this
      option in the settings.
      <br/><br/>

      <b>Security/privacy</b><br/>
      No data leaves your computer by using this website. All analysis is done locally on your own
      computer. This is a cookie-free website.
      <br/><br/>

      <b>Compatibility</b><br/>
      Motion Ticker does not work in Internet Explorer. In case you are still using IE, please 
      consider moving to a modern browser like Chrome, Edge, Firefox of Safari.
      <br/><br/>

      <b>Embed code</b><br/>
      Teachers and others can embed Motion Ticker in their own virtual learning environment (VLE).
      The embed code would be for example:<br/>
      <pre> &lt;iframe src=&quot;https://jeroenvantilburg.nl/motionticker/&quot; width=&quot;100%&quot; height=&quot;800&quot;&gt;&lt;/iframe&gt;</pre><br/>
      The width and height should be adjusted for your own environment.
      <br/><br>

      <b>Source code</b><br>
      The source code from this website is freely available on 
      <a href="https://github.com/jeroenvantilburg/motionticker">Github</a> under the 
      <a href="https://en.wikipedia.org/wiki/MIT_License">MIT license</a>. The source code
      may be freely copied and hosted on every web server. Please make sure to keep the code
      up-to-date since new updates and bug fixes come out regularly.
      Suggestions for improvements are welcome.
      <br/><br/>

      <b>Feedback and questions</b><br/>
      The keep this website as user-friendly as possible I depend on your feedback. Please send your
      questions, improvements, bug reports, suggestions, comments and compliments 
      to <feedback></feedback>. 
      <br/><br> 
      
      <b>Acknowledgments</b><br/>
      Motion ticker depends on the following beautiful javascript libraries:
      <ul>
        <li><a href="https://jquery.com">jQuery</a>: DOM manipulation</li>
        <li><a href="https://mediainfo.js.org/">Mediainfo.js</a>: extract meta data from video 
          files.</li>
        <li><a href="https://www.chartjs.org">Chart.js</a>: charting library</li>
        <li><a href="https://www.papaparse.com">PapaParse</a>: CSV parser</li>
        <li><a href="http://fabricjs.com">Fabric</a>: HTML5 canvas library</li>
        <li><a href="">OpenCV</a>: computer vision and machine learning software library.</li>
      </ul>

      <b>Other applications</b><br/>
      There are a number of other, third-party applications that can be used to analyse videos. Select
      the applications that suits your needs.
      <ul>
        <li><a href="https://cma-science.nl">Coach7</a> (paid) is a software package for STEM Education.
        It includes a tool for data video activities.</li>
        <li><a href="https://www.vernier.com/product/video-analysis/">Vernier Video Analysis</a> (paid)
        brings video analysis to your students in a dedicated and streamlined application.</li>
        <li><a href="https://physlets.org/tracker/">Tracker</a> (free) is a video analysis and 
        modeling tool from Open Source Physics. There is also a 
        <a href="https://tracker.physlets.org/trackerJS">javascript version</a> that runs on most 
          computers.</li>
        <li><a href="http://x-application.sony.net/motionshot/en/">Sony motion shot</a> (free) is an app
          for Android and iOS that automatically renders the movement in a video into a single still 
          image.</li>
      </ul>
    </div>
  </div>

  <div id="settingsModal" class="modal">
    <div class="modal-content"> <span class="close">&times;</span>
      <h2>Settings</h2>
      <table>
        <tr><th colspan="3">Analysis</th></tr>
        <tr>
          <td>Draw all points:</td>
          <td><input id="drawAllPoints" type="checkbox"></input></td>
          <td>Show all the positions that have been marked.</td>
        </tr>
        <tr>
          <td>Skip frames:</td>
          <td><input id="framesToSkip" type="number" min="-100" step="1" max="100"></input></td>
          <td>Number of frames to skip during manual analysis.</td>
        </tr>
        <tr>
          <td>Adaptive tracking:</td>
          <td><input id="adaptive" type="checkbox"></input></td>
          <td>Only for the automatic analysis: adapt the track window to allow for small changes of
            the shape, size or rotation of the object during the analysis.</td>
        </tr>
      </table>
      <br/>
      <table>
        <tr><th colspan="3">Derived data</th></tr>
        <tr>
          <td>Display velocity:</td>
          <td><input type="checkbox" id="showVelocity"></td>
          <td>Show or hide the velocity data.</td>
        </tr>
        <tr>
          <td>Display acceleration:</td>
          <td><input type="checkbox" id="showAcceleration"></td>
          <td>Show or hide the acceleration data.</td>
        </tr>
        <tr>
          <td>Integration time:</td>
          <td><input id="integrationTimeInput" type="number" min="1" step="1" max="10"></input></td>
          <td>Number of frames used to calculate velocity/acceleration. 
            A larger integration time results in smoother velocity and acceleration graphs, 
            but a decreased sensitivity to changes in the velocity/acceleration.</td>
        </tr>
      </table>
      <br/>
      <table>
        <tr><th colspan="3">Export CSV files</th></tr>
        <tr>
          <td>Decimal separator:</td>
          <td>
            <select id="decimalSeparatorInput" name="decimalSep">
              <option value=".">.</option>
              <option value=",">,</option> 
            </select>
          </td>
          <td>Numbers are written as 1<decimalSep></decimalSep>23</td>
        </tr>
        <tr>
          <td>Delimiter:</td>
          <td>
            <select id="delimiterInput" name="delimiter">
              <option value=",">,</option>
              <option value="tab">tab</option>
              <option value=";">;</option>
              <option value=" ">space</option>
            </select>
          </td>
          <td>Fields are separated as <pre>"Field1"<delimiter></delimiter>"Field2"</pre></td>
        </tr>
        <tr>
          <td>Avoid empty cells:</td>
          <td><input type="checkbox" id="avoidEmptyCells"></td>
          <td>Adjust the velocity time stamps by at most half a frame. This avoids empty cells, 
            but slightly reduces the accuracy of the velocity time stamp.</td>
        </tr>
      </table>
    </div>
  </div>

  <div id="mediaInfoModal" class="modal">
    <div class="modal-content"> <span class="close">&times;</span>
      <h2>Video File Info</h2>
      The following information is obtained from the 
      <a href="https://mediainfo.js.org/">mediainfo.js</a> library. 
      We only need the FrameRate number.
      <div id="mediaInfoResult"></div>
    </div>
  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/mediainfo.js/dist/mediainfo.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.3.1/fabric.min.js"></script>
  <script src="scripts/fabric-patch-touch.js"></script>
  <script async src="https://docs.opencv.org/3.4.13/opencv.js" id="opencv"></script>  
  <script src="scripts/motionticker.js"></script>
  <script data-goatcounter="https://motionticker.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
  <noscript>Your browser does not support JavaScript!</noscript> 

</body>
</html>
